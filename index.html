<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>/home/mattshen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Writings about my software engineering philosophy">
<meta property="og:type" content="website">
<meta property="og:title" content="/home/mattshen">
<meta property="og:url" content="https://www.mattshen.com/index.html">
<meta property="og:site_name" content="/home/mattshen">
<meta property="og:description" content="Writings about my software engineering philosophy">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="/home/mattshen">
<meta name="twitter:description" content="Writings about my software engineering philosophy">
    

    
        <link rel="alternate" href="/" title="/home/mattshen" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-93955436-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">/home/mattshen</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="https://github.com/mattshen">GitHub</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
                    <a class="main-nav-link" href="/topics">Topics</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/maze.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="https://github.com/mattshen">GitHub</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                    <td><a class="main-nav-link" href="/topics">Topics</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/maze.png" />
            <h2 id="name">Matt Shen</h2>
            <h3 id="title">Software Engineer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Sydney, Australia</span>
            <a id="follow" target="_blank" href="https://github.com/mattshen/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                3
                <span>posts</span>
            </div>
            <div class="article-info-block">
                8
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/mattshen/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://twitter.com/mattshen" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-React-Native-Push-Notifications" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/04/05/React-Native-Push-Notifications/">React Native Push Notifications</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/04/05/React-Native-Push-Notifications/">
            <time datetime="2017-04-05T10:00:00.000Z" itemprop="datePublished">2017-04-05</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/App/">App</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Android/">Android</a>, <a class="tag-link" href="/tags/iOS/">iOS</a>, <a class="tag-link" href="/tags/react-native/">react-native</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><p>It’s an article about my own experience implementing Push Notification in react-native for both platforms. It contains the tools and libraries I picked and pitfalls I encountered. </p>
<h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h1><p>Push Notification looks simple, but actually it carries some complexities when putting it in use. There is quite a list of pitfalls for both platforms as well. </p>
<h1 id="Understand-the-Concepts"><a href="#Understand-the-Concepts" class="headerlink" title="Understand the Concepts"></a>Understand the Concepts</h1><p>If you are not new to software engineering, it shouldn’t be a major hurdle to understand the design of push notification service. However, here are two articles I found from online that should be helpful to familiarize yourself with it. </p>
<ul>
<li><a href="http://stackoverflow.com/questions/17262511/how-do-ios-push-notifications-work" target="_blank" rel="external">How do iOS Push Notifications work?</a></li>
<li><a href="http://support.airbop.com/kb/faq/how-does-google-cloud-messaging-work" target="_blank" rel="external">How Does Google Cloud Messaging Work?</a></li>
</ul>
<p>The fundamental concepts and system architecture are almost the same. So once you know one of them, you can easily understand the other one (融会贯通).</p>
<h1 id="To-Implement"><a href="#To-Implement" class="headerlink" title="To Implement"></a>To Implement</h1><h2 id="Server-Side"><a href="#Server-Side" class="headerlink" title="Server Side"></a>Server Side</h2><p>The easiest to find out how server side works is to setup amazon SNS. It can be used to test both GCM/FCM and APN. </p>
<p>For GCM/FCM, you can also test via <code>postman</code>, or even <code>curl</code>. I didn’t find an easy way to test APN with some simple tool so far. </p>
<p>If you prefer DIY, and eventually to write your provider code to communicate with Google and Apple server directly. Here are two options written in NodeJS.</p>
<ul>
<li><a href="https://github.com/node-apn/node-apn" target="_blank" rel="external">https://github.com/node-apn/node-apn</a></li>
<li><a href="https://github.com/ToothlessGear/node-gcm" target="_blank" rel="external">https://github.com/ToothlessGear/node-gcm</a></li>
</ul>
<h2 id="App-Side"><a href="#App-Side" class="headerlink" title="App Side"></a>App Side</h2><p>First, we need pick some mature and stable libraries. Unfortunately, there isn’t one. Here are the only two that has got some attention in the community. </p>
<ul>
<li><a href="https://github.com/zo0r/react-native-push-notification" target="_blank" rel="external">https://github.com/zo0r/react-native-push-notification</a></li>
<li><a href="https://github.com/wix/react-native-notifications" target="_blank" rel="external">https://github.com/wix/react-native-notifications</a></li>
</ul>
<p>I prefer the 2nd one, which is more active and has better completeness in features. </p>
<p>If you have prior experience on implementing Push Notification for one of the platforms, you can also write your own react-native modules which give you more control. </p>
<h1 id="Pitfalls"><a href="#Pitfalls" class="headerlink" title="Pitfalls"></a>Pitfalls</h1><h3 id="1-FCM-vs-GCM"><a href="#1-FCM-vs-GCM" class="headerlink" title="1. FCM vs GCM"></a>1. FCM vs GCM</h3><p>FCM is the evolved version of GCM. Google has also move API key setup from API Console and put it in Firebase Console. So, if you are reading some old articles about how to setup GCM with Google, they are most likely out-of- date. However, once you get the API key from Firebase Console, the rest is pretty easy.</p>
<h3 id="2-APN-setup"><a href="#2-APN-setup" class="headerlink" title="2. APN setup"></a>2. APN setup</h3><p>This is the help page to Apple - <a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html#//apple_ref/doc/uid/TP40012582-CH26-SW6" target="_blank" rel="external">configure your notifications with Apple</a>. </p>
<p>In case you work for a company and you don’t have the permission creating <code>Apple Push Notification service SSL</code>, you need to ask someone who has the permission, and send the certificate (in correct format, .p12) to you so you can test how server side works. </p>
<h3 id="3-Launching-App-from-cold-state-and-get-the-initial-notification"><a href="#3-Launching-App-from-cold-state-and-get-the-initial-notification" class="headerlink" title="3. Launching App from cold state and get the initial notification"></a>3. Launching App from cold state and get the initial notification</h3><p><strong>iOS</strong>. Natively supported even in react-native <code>PushNotificationIOS</code>. Only problem is you cannot get the initial notification if App is launched from the icon. </p>
<p><strong>Android</strong>. <code>react-native-notifications</code> provides a similar implementation just like the iOS one. So far I haven’t found any problem with it. Also, you cannot get the initial notification if launching App from the icon. </p>
<h3 id="4-Background-vs-Foreground-Notification"><a href="#4-Background-vs-Foreground-Notification" class="headerlink" title="4. Background vs Foreground Notification"></a>4. Background vs Foreground Notification</h3><p><strong>iOS</strong>. Server side has to include <code>&quot;content-available&quot;: 1</code> in the JSON message, otherwise your post-notification processing code won’t be called in background e.g.<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;<span class="attr">"aps"</span>:&#123;<span class="attr">"content-available"</span>:<span class="number">1</span>&#125;&#125;</div></pre></td></tr></table></figure></p>
<p>See more details <a href="https://medium.com/posts-from-emmerge/ios-push-notification-background-fetch-demystified-7090358bb66e" target="_blank" rel="external">here</a></p>
<p><strong>Android</strong>. Notification are even fired when app is in foreground by default. You probably want to write your own logic to block foreground firing. Here is what I did (with <code>react-native-notifications</code>):<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">postNotification</span><span class="params">(<span class="keyword">int</span> id, Notification notification)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!mAppLifecycleFacade.isAppVisible()) &#123;</div><div class="line">        <span class="keyword">final</span> NotificationManager notificationManager = (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);</div><div class="line">        notificationManager.notify(id, notification);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="5-Badge-Challenge"><a href="#5-Badge-Challenge" class="headerlink" title="5. Badge Challenge"></a>5. Badge Challenge</h3><p><strong>Android</strong>.  Badging is not a standard Android feature, but the major phone maker all did their own implementations, Samsung, HTC, Huawei, etc. There is a very good library in github – <a href="https://github.com/leolin310148/ShortcutBadger" target="_blank" rel="external">ShortcutBadger</a>. You need write a react-native module to call some APIs. </p>
<p><strong>iOS</strong>. It’s quite a pain till the time I write this article. The badge is controlled by <code>&quot;content-available&quot;: 1</code> when the App is cold (aka killed or not launched). If you write your own provider, you have the control. But if notification is from some SaaS service, you have to rely on whether they send it to you or not.  </p>
<h3 id="6-What-number-to-badge"><a href="#6-What-number-to-badge" class="headerlink" title="6. What number to badge?"></a>6. What number to badge?</h3><p>At the time of this writing. We’ve decided to badge 1 to just attract user’s attention that there is something new in the app. If you want some complex scenarios to work. You probably need to maintain the number at your server side, which is quite a challenge.</p>
<h2 id="Ending"><a href="#Ending" class="headerlink" title="Ending"></a>Ending</h2><p>Hope this article help answer some of your questions or confusions. </p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://www.mattshen.com/2017/04/05/React-Native-Push-Notifications/" data-id="cj3pfck4t0006cm1p69h0nh7m" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://www.mattshen.com/2017/04/05/React-Native-Push-Notifications/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://www.mattshen.com/2017/04/05/React-Native-Push-Notifications/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Javascript-Re-learn-the-types" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/03/20/Javascript-Re-learn-the-types/">Javascript the types (Nouns and Verbs)</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/03/20/Javascript-Re-learn-the-types/">
            <time datetime="2017-03-19T23:02:00.000Z" itemprop="datePublished">2017-03-20</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Programming-Languages/">Programming Languages</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Javascript/">Javascript</a>, <a class="tag-link" href="/tags/Type/">Type</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="The-reason"><a href="#The-reason" class="headerlink" title="The reason"></a>The reason</h1><p>This is the first post of a series of Javascript re-learn posts. Why am I writing it when there are some many similar stuff out on Internet? If there has to be a reason, the first one would be to review my knowledge on Javascript and hopefully I can get some level of “学而时习之,可以为师矣”.</p>
<h1 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h1><p>One of the best ways to learn a programming language is to think like I’m going to design it. </p>
<p>Just like the natural languages, first we need to properly express the things in nouns, like apple, orange, etc. As an advanced programming language, Javascript’s types are properly designed, not too simple not too complex. </p>
<p>It starts with <code>Number</code>, then <code>String</code> and <code>Boolean</code>. Then a little more complex, <code>Object</code> and <code>Function</code>. And that’s all, not too overwhelming for beginners to start with. </p>
<h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><p>Rather that some other languages, e.g. Java, with which the programmer has to remember <code>Integer</code>, <code>Long</code>, <code>Float</code>, <code>Double</code>, <code>BigDecimal</code> and <code>BigInteger</code>, etc, Javascript relieves the beginners from this burden. All numbers start with Type Number. </p>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>After much pain with C, most programming language designers have added <code>String</code> as a primitive type ever since, which is proved to be the very right thing to do. </p>
<h2 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h2><p><code>Boolean</code> is not necessary to be a primitive, e.g. C. But defining a Boolean type has been well accepted. It makes the readability of the program better. see following negative example: </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> a = <span class="number">0</span>; </div><div class="line"></div><div class="line"><span class="comment">//Then change a to some other value</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> (a) &#123; <span class="comment">// do something if expression "a" is true</span></div><div class="line">  <span class="comment">//do something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>To be honest, after so many years, I still have to google to find out whether <code>0</code> is true or <code>non-0</code> is true. </p>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>When Javascript is designed, OOP is already well accepted. So the author adopted some OOP into the language. But probably he doesn’t like the complexities of OOP – classes, interfaces, abstract classes, inheritance, etc. So he just pick one very simple concept, the <code>Object</code>, to express all the different real life things, just like he picked only <code>Number</code> to express all the numbers. </p>
<h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><p>Imagine (脑洞大开) the first human beings who invented the word “apple”, then they can use it communicate with their peers. But soon after that, they would have the need to express “pick” and “eat”.</p>
<p>In the programming languages, “pick” and “eat” are functions. Once programmers have objects, they would need functions to operate on the objects. Unlike some languages like Java (sorry), Javascript’s functions can work independently. They are first-class citizens just like objects. This little difference opens the door for Javascript to become a proper player in the functional programming area. </p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://www.mattshen.com/2017/03/20/Javascript-Re-learn-the-types/" data-id="cj3pfck4i0002cm1p05lke7mg" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://www.mattshen.com/2017/03/20/Javascript-Re-learn-the-types/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://www.mattshen.com/2017/03/20/Javascript-Re-learn-the-types/">Comments</a>
    

        </footer>
    </div>
    
</article>



    <article id="post-Java-8-Lambda-Expression-in-Short" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2016/05/08/Java-8-Lambda-Expression-in-Short/">Java 8 Lambda Expression in Short</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2016/05/08/Java-8-Lambda-Expression-in-Short/">
            <time datetime="2016-05-07T14:00:00.000Z" itemprop="datePublished">2016-05-08</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Programming-Languages/">Programming Languages</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/Functional/">Functional</a>, <a class="tag-link" href="/tags/Java/">Java</a>, <a class="tag-link" href="/tags/Lambda/">Lambda</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="Anonymous-class-in-a-new-form"><a href="#Anonymous-class-in-a-new-form" class="headerlink" title="Anonymous class in a new form"></a>Anonymous class in a new form</h1><p>Simply speaking, Java 8 Lambda expressions are just anonymous classes which have occasionally made their appearances in the previous Java versions. But now they appears in much more concise forms with the new syntactic level support. Here are a couple of examples how concise we can archive in Java coding with the help of lambda expression.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Anonymous class</span></div><div class="line">Collections.sort(names, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String o1, String o2)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> o1.compareTo(o2);</div><div class="line">  &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//Java 8 Lambda expression in complete </span></div><div class="line">Collections.sort(names, (String o1, String o2) -&gt; &#123;</div><div class="line">  <span class="keyword">return</span> o1.compareTo(o2);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//Parameter type can be omitted, because the types can be inferred</span></div><div class="line">Collections.sort(names, (o1, o2) -&gt; &#123;</div><div class="line">  <span class="keyword">return</span> o1.compareTo(o2);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">//return can be omitted for one line lambda</span></div><div class="line">Collections.sort(names, (o1, o2) -&gt; o1.compareTo(o2));</div><div class="line"></div><div class="line"><span class="comment">//method reference can make it even shorter</span></div><div class="line">Collections.sort(names, String::compareTo);</div></pre></td></tr></table></figure>
<h1 id="Default-method-is-necessary-for-lambdas"><a href="#Default-method-is-necessary-for-lambdas" class="headerlink" title="Default method is necessary for lambdas"></a>Default method is necessary for lambdas</h1><p>With anonymous classes, it is possible to define a new utility method, e.g.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Anonymous class</span></div><div class="line">Collections.sort(names, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">  <span class="meta">@Override</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String o1, String o2)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> o1.compareTo(o2);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> Comparator&lt;String&gt; <span class="title">reversed</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> Collections.reverseOrder(<span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>But the utility method cannot fit into a concise lambda. This is why Java 8 has made default methods possible in interfaces. The example above can now be re-written in Java 8 as follow:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Collections.sort(names, ((Comparator&lt;String&gt;)String::compareTo).reversed());</div></pre></td></tr></table></figure></p>
<blockquote>
<p>Note: the type casting is necessary, because type inference is not that smart in that context.</p>
</blockquote>
<h1 id="Using-functional-features-rather-than-being-functional"><a href="#Using-functional-features-rather-than-being-functional" class="headerlink" title="Using functional features rather than being functional"></a>Using functional features rather than being functional</h1><p>The introduction of lambda and the re-written interfaces/classes makes Java 8 look like functional programming language. But as a matter of fact, it is not. Type is still the the first-class citizen, not functions. Everything in Java is still type of either predefined types or primitives. Passing lambdas around is actually just passing usual objects around. </p>
<p>However, this is what is needed for most of the Java developers – writing concise code as well as thinking in a functional programming way. </p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a href="https://github.com/winterbe/java8-tutorial" target="_blank" rel="external">https://github.com/winterbe/java8-tutorial</a></li>
<li><a href="http://www.infoq.com/articles/How-Functional-is-Java-8" target="_blank" rel="external">http://www.infoq.com/articles/How-Functional-is-Java-8</a></li>
</ul>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://www.mattshen.com/2016/05/08/Java-8-Lambda-Expression-in-Short/" data-id="cj3pfck4c0000cm1p756xfasw" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://www.mattshen.com/2016/05/08/Java-8-Lambda-Expression-in-Short/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://www.mattshen.com/2016/05/08/Java-8-Lambda-Expression-in-Short/">Comments</a>
    

        </footer>
    </div>
    
</article>


</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/04/05/React-Native-Push-Notifications/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/App/">App</a></p>
                            <p class="item-title"><a href="/2017/04/05/React-Native-Push-Notifications/" class="title">React Native Push Notifications</a></p>
                            <p class="item-date"><time datetime="2017-04-05T10:00:00.000Z" itemprop="datePublished">2017-04-05</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/03/20/Javascript-Re-learn-the-types/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Programming-Languages/">Programming Languages</a></p>
                            <p class="item-title"><a href="/2017/03/20/Javascript-Re-learn-the-types/" class="title">Javascript the types (Nouns and Verbs)</a></p>
                            <p class="item-date"><time datetime="2017-03-19T23:02:00.000Z" itemprop="datePublished">2017-03-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/05/08/Java-8-Lambda-Expression-in-Short/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Programming-Languages/">Programming Languages</a></p>
                            <p class="item-title"><a href="/2016/05/08/Java-8-Lambda-Expression-in-Short/" class="title">Java 8 Lambda Expression in Short</a></p>
                            <p class="item-date"><time datetime="2016-05-07T14:00:00.000Z" itemprop="datePublished">2016-05-08</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/App/">App</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming-Languages/">Programming Languages</a><span class="category-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Functional/">Functional</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lambda/">Lambda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Type/">Type</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react-native</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Functional/" style="font-size: 10px;">Functional</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Lambda/" style="font-size: 10px;">Lambda</a> <a href="/tags/Type/" style="font-size: 10px;">Type</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/react-native/" style="font-size: 10px;">react-native</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Matt Shen &lt;lovelywib@gmail.com&gt;<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
        this.page.identifier = 'undefined';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'personal-blog-7' + '.disqus.com/count.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>